- content_for :title, t('.title')
%h1= content_for :title
= render partial: 'menus/admin_tabs'

%ul.nav.nav-tabs
  %li.nav-item
    = link_to 'Active Accounts', admin_users_path, class: 'nav-link'
  %li.nav-item
    = link_to 'Inactive Accounts', admin_inactive_users_path, class: 'nav-link'
  - if GrdaWarehouse::Config.get(:request_account_available)
    %li.nav-item.active
      = link_to 'Pending Accounts', admin_account_requests_path, class: 'nav-link'

.table-utilities
  %p= page_entries_info @account_requests, entry_name: _('account requests')

.row
  .col-sm-12
    .table-responsive
      %table.table.table-sm
        %thead
          %tr
            %th Request Date
            %th Name
            %th Email
            %th Request Reason
            %th Approve
            %th Reject
        %tbody
          - @account_requests.each do |req|
            %tr
              %td= req.created_at.to_date
              %td= req.name
              %td= req.email
              %td= simple_format req.details
              %td
                = simple_form_for req, url: admin_account_request_path(req) do |f|
                  = f.input :agency_id, collection: @agencies, label_method: :name, value_method: :id, required: false, include_blank: 'Unknown', input_html: { class: 'select2' }, wrapper_html: { class: 'mb-2' }
                  = f.submit 'Approve', class: 'btn btn-secondary btn-sm'
              %td
                = link_to admin_account_request_path(req), method: :delete, class: 'btn btn-danger', data: { confirm: "Rejecting this request will not notify #{req.name}" } do
                  %i.icon-cross
                  Reject Request

    %p= paginate @account_requests