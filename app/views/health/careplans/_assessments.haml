= render 'case_management_notes'
= render 'ssms'
= render 'chas'

= content_for :page_js do
  :javascript
    $('.datatable-ssm').DataTable({
      searching: false,
      ordering: false,
      pageLength: 20,
      lengthChange: false,
      pagingType: 'simple',
      fnDrawCallback: function() {
        // hide pagination if there is only 1 page of results
        [0, 1, 2].forEach(i => {
          table_size = $(`#DataTables_Table_${i}.datatable-ssm tr`).length
          if (table_size > 0 && table_size < 21) {
            $(`#DataTables_Table_${i}_wrapper .row:last-of-type`).hide();
          }
        })
      }
    })
