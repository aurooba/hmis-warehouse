.mb-2.reports
  - [:start_date, :end_date, :coc_codes, :project_ids].each do |param|
    - value = report.public_send(param)
    - next if value.blank?
    - if param == :project_ids
      %label.label.label-default.parameter-label Projects
      %label.label.label-primary.parameter-value
        %strong
          - compacted = value.compact.delete_if(&:blank?)
          - compacted[0..4].each do |project_id|
            - project = GrdaWarehouse::Hud::Project.find_by(id: project_id)
            - if project
              = link_to_if can_view_projects?, project.name, project_path(project_id)
            %br
          - if compacted.size > 5
            - tooltip = compacted.map { |project_id| GrdaWarehouse::Hud::Project.find_by(id: project_id)&.name }.compact.join('<br />').html_safe
            %span.action{data: {toggle: :tooltip, html: 'true', title: tooltip}}
              #{compacted.size - 5} more...
    - else
      %label.label.label-default.parameter-label
        = param.to_s.humanize
      %label.label.label-primary.parameter-value
        %strong
          - value = value.compact.delete_if(&:blank?).join(', ') if value.is_a?(Array)
          = value
      &nbsp;
  - if report.options['project_group_ids'].present?
    - project_group_ids = report.options['project_group_ids']
    - project_group_names = GrdaWarehouse::ProjectGroup.find(project_group_ids).pluck(:name)
    %label.label.label-default.parameter-label Project Groups
    %label.label.label-primary.parameter-value= project_group_names.join(', ')
