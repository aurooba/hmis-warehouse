- key = :entering
%h2 Entering
= link_to_if show_client_details?, "Total #{pluralize(@report.entering_total_count, 'Unique Client')}", details_performance_dashboards_overview_index_path(filter_params.merge(options: {key: key, age: true, breakdown: breakdown})), data: {loads_in_pjax_modal: true}

.jChart.entering-by-age-chart

- columns = [@report.entering_by_age_data_for_chart[:columns]]
- if @report.include_comparison?
  - columns << @comparison.entering_by_age_data_for_chart[:columns]
- categories = @report.entering_by_age_data_for_chart[:categories]

= content_for :page_js do
  :javascript
    (function($) {
      var columns = #{columns.to_json.html_safe};
      var categories = #{categories.to_json.html_safe};
      var options = {
        follow_link: '#{show_client_details?}',
        link_base: 'overview/details',
        key: '#{key}',
        breakdown: '#{breakdown}',
        sub_keys: #{@report.age_bucket_titles.invert.to_json.html_safe}
      };
      var entering_by_age_chart = new App.WarehouseReports.PerformanceDashboards.HorizontalBar('.entering-by-age-chart', columns, categories, options);
    })(jQuery);