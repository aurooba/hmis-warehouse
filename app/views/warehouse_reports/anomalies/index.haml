- title = "Reported Client Anomalies"
- content_for :title, title
%h1= title
= render '/warehouse_reports/breadcrumbs', tab: 'data-quality'

.warehouse-reports__anomalies
  %ul.nav.nav-tabs{role: :tablist}
    %li.nav-item{role: :presentation}
      %a{href: "#new", role: :tab, data: {toggle: :tab}, aria: {controls: :new}, class: 'nav-link active'}
        New
    %li.nav-item{role: :presentation}
      %a{href: "#unresolved", role: :tab, data: {toggle: :tab}, aria: {controls: :unresolved}, class: 'nav-link'}
        Unresolved
    %li.nav-item{role: :presentation}
      %a{href: "#resolved", role: :tab, data: {toggle: :tab}, aria: {controls: :resolved}, class: 'nav-link'}
        Resolved

  .tab-content
    #new.tab-pane.active{role: :tabpanel}
      = render 'section', group: @new
    #unresolved.tab-pane{role: :tabpanel}
      = render 'section', group: @unresolved
    #resolved.tab-pane{role: :tabpanel}
      = render 'section', group: @resolved

= content_for :page_js do
  :javascript
    var selectedTab = window.location.hash
    if (!selectedTab) {
      $("ul.nav-tabs li:first-child a").tab('show')
    }
    $('.nav-tabs a').click(function(e) {
      e.preventDefault();
      $(this).tab('show');
      $(this).parent().siblings().removeClass('active')
    });
    $("ul.nav-tabs a").on("shown.bs.tab", function(e) {
      var id = $(e.target).attr("href").substr(1);
      history.pushState({}, id, $(e.target).attr("href"));
    });
    var hash = window.location.hash;
    $('.nav-tabs a[href="' + hash + '"]').tab('show');