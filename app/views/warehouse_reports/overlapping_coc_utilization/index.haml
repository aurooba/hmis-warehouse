- title = "Overlapping CoC Utilization"
- content_for :title, title
= render '/warehouse_reports/breadcrumbs', tab: 'operational-reports'
.l-page-heading.mb-4
  %h1= title
  %p This report summarizes the overlaps in clients and services betweeen CoCs you have shared access with.

- report_id = 'coc-overlap-report'
- map_id = report_id + '-map'
- results_id = report_id + '-results'
- end_date = Date.current
- start_date = end_date - 1.year
.warehouse-reports__ad_hoc-export{id: report_id}
  .row
    .col-5
      = simple_form_for :compare, url: url_for, method: :get do |f|
        %p.font-weight-bold To start, select a time range:
        = f.input :start_date, as: :date_picker, input_html: {value: start_date}
        = f.input :end_date, as: :date_picker, input_html: {value: end_date}
        %p.font-weight-bold Select two CoCs below or by clicking on the map:
        = f.input :coc1, collection: @cocs, value_method: :id, name_method: :name, required: true, label: 'CoC 1', input_html: { class: [:select2] }
        = f.input :coc2, collection: @cocs, value_method: :id, name_method: :name, required: true, label: 'CoC 2', input_html: { class: [:select2] }
    .col-6.ml-auto
      .coc-util-overlap{id: map_id}
  %div{id: results_id}

= content_for :page_js do
  :javascript
    new App.Reports.CocOverlap('#{report_id}', {
      map: {
        elementId: "#{map_id}",
        shapes: #{@shapes.to_json.html_safe},
      },
      inputs: [ '#compare_coc1', '#compare_coc2'],
      dateInputs: [ '#compare_start_date', '#compare_end_date'],
    })
