.row
  .col-12
    %p
      Based on claims Incurred from #{report.claim_date_range.first} to #{report.claim_date_range.last}. Paid through #{report.latest_payment_date}. Demographics are as of #{report.roster_as_of}.
    %table.table.table-sm.table-striped{style: 'width: initial;'}
      - report.summary_rows.each do |label, html_value|
        %tr
          %th= label
          %td= html_value
    %details
      %summary Query
      %code= report.claims_query.to_sql
    - table = report.detail_rows
    .table-responsive
      %table.table.table-bordered.table-sm.table-striped
        %thead
          %tr
            %th= ''
            - report.detail_cols.each do |_fld, label|
              %th= label

        %tbody
          - table.each do |row|
            %tr
              %th{axis: :row}= row['ccs_id'].presence || 'All claims'
              - report.detail_cols.each do |fld, _label|
                %td.text-right= report.formatted_value fld, row
