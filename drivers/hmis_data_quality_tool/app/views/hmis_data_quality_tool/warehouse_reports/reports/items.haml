= content_for :crumbs do
  = link_to hmis_data_quality_tool_warehouse_reports_report_path(@report) do
    &laquo; #{@report.title}

%h1.ml-2 #{@result.category}: #{@result.title}
.warehouse-reports__completed.mt-2.d-flex
  = @report.filter.describe_filter_as_html([:start, :end, :comparison_pattern], inline: true)
.d-flex.mb-4
  .ml-auto
    = link_to items_hmis_data_quality_tool_warehouse_reports_report_path(@report, key: @result.title, format: :xlsx), class: ['btn', 'btn-secondary'] do
      %i.icon-file-excel
      Download Excel
- if @items.blank?
  .none-found No records found.
- else
  - headers = @result.item_class.detail_headers
  .card
    .overflow-x-scroll{style: "height: 800px"}
      %table.table.table-sm.table-bordered.table-fixed
        %thead.thead-dark
          %tr
            %th

            - headers.each_value do |header|
              %th= header
        %tbody.thead-dark
          - @items.each.with_index do |client, i|
            %tr
              %th= i + 1
              - headers.each_key do |k|
                - value = client.public_send(k)
                %td
                  - if k.to_s == 'destination_client_id'
                    = link_to appropriate_client_path(client[k]) do
                      = value
                    %a{href: '#', class: ['btn', 'btn-sm'], data: { toggle: :popover, title: 'Client Information', url: api_client_path(client.client_id), html: 'true' }}
                      %i.icon-info
                  - else
                    = formatted_cell(value)
