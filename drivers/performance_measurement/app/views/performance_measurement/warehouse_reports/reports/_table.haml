- markdown = Redcarpet::Markdown.new(::InlineHtml)
- @report.display_order.each.with_index do |sub_sections, i|
  - sub_sections.each do |keys|
    - keys.each.with_index do |(key, sub_keys), idx|
      - class_name = "performance-measurement--highlight-light-#{i + 1} p-2"
      - row = @report.detail_hash[key]
      - if idx.zero?
        %h2{ class: class_name }= "#{row[:category]}: #{row[:sub_category]}"
      .table-responsive.mb-4
        %table.table.table-striped
          - if idx.zero?
            %thead
              %th Relevancy
              %th Metric
              %th Passed
              %th
          %tbody
            = render 'table_row', key: key, row: row, pdf: pdf
      - if sub_keys.present?
        - content_for "panel_collapse_content_#{sub_keys.first}".to_sym do
          .table-responsive
            %table.table.table-striped
              %thead
                %th Relevancy
                %th Metric
                %th Passed
                %th
              - sub_keys.each.with_index do |key, idx|
                - row = @report.detail_hash[key]
                %tbody
                  = render 'table_row', key: key, row: row, pdf: pdf
        = render 'common/panel_collapse', id: sub_keys.first.to_s, title: 'Details', content: "_#{sub_keys.first}", panel_body_padded: 'n'
