
- chart_class = "location-chart-#{population}"
.chart.pt-2{ class: [chart_class, "active_date_#{data.keys.first}"], data: { active_date: data.keys.first }}

:javascript
  var controller;
  var dates = #{data.to_json.to_s.html_safe};
  var active_date = $(".#{chart_class}").data('activeDate');
  var chart = bb.generate({
    data: {
      columns: [],
      type: 'donut'
    },
    bind_to: ".#{chart_class}",
    color: {
      pattern: #{@report.chart_color_pattern}
    }
  });
  // initialize the first data set
  $('.jQuarters').on('change', function(e) {
    var index = $(this).val();
    var selected_date = $(this).data('dates')[index]
    chart.load({ columns: dates[selected_date]['data']});
  });
  $('.jQuarters').trigger('change');
